#!/bin/bash
# debug
# set -x

cd `dirname $0`/..
EXAMPLES_DIR=`pwd`

if [ -z $COHERENCE_HOME ]; then
    echo COHERENCE_HOME is not set!
    echo set COHERENCE_HOME to a Coherence installation.
    exit 1
fi

if [ -z $JAVA_HOME ]; then
    echo JAVA_HOME is not set!
    echo set JAVA_HOME to a JRE/JDK 1.4.2 or greater installation.
    exit 1
fi

CONFIG=$EXAMPLES_DIR/resource/config

COH_OPTS="$COH_OPTS -cp $CONFIG:$COHERENCE_HOME/lib/coherence.jar:$EXAMPLES_DIR/classes"
COH_OPTS="$COH_OPTS -Dtangosol.coherence.cacheconfig=$CONFIG/examples-cache-config.xml"

echo $JAVA_HOME/bin/java $COH_OPTS -Xms1g -Xmx1g -Xloggc: com.tangosol.net.DefaultCacheServer

$JAVA_HOME/bin/java $COH_OPTS -Xms1g -Xmx1g com.tangosol.net.DefaultCacheServer $*
cd